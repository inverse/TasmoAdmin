/*! Tablesaw - v3.0.8 - 2018-01-25
* https://github.com/filamentgroup/tablesaw
* Copyright (c) 2018 Filament Group; Licensed MIT */
!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],(function(a){return t.Tablesaw=e(a,t)})):"object"==typeof exports?module.exports=e("document"in t?require("jquery"):require("jquery")(t),t):t.Tablesaw=e(jQuery,t)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var a=e.document,n=!1;a.addEventListener("DOMContentLoaded",(function(){n=!0}));var i,r,s,o,l,h,d,c={i18n:{modeStack:"Stack",modeSwipe:"Swipe",modeToggle:"Toggle",modeSwitchColumnsAbbreviated:"Cols",modeSwitchColumns:"Columns",columnToggleButton:"Columns",columnToggleError:"No eligible columns.",sort:"Sort",swipePreviousColumn:"Previous column",swipeNextColumn:"Next column"},mustard:"head"in a&&(!e.blackberry||e.WebKitPoint)&&!e.operamini,$:t,_init:function(t){c.$(t||a).trigger("enhance.tablesaw")},init:function(t){n?c._init(t):"addEventListener"in a&&a.addEventListener("DOMContentLoaded",(function(){c._init(t)}))}};return t(a).on("enhance.tablesaw",(function(){"undefined"!=typeof TablesawConfig&&TablesawConfig.i18n&&(c.i18n=t.extend(c.i18n,TablesawConfig.i18n||{})),c.i18n.modes=[c.i18n.modeStack,c.i18n.modeSwipe,c.i18n.modeToggle]})),c.mustard&&t(a.documentElement).addClass("tablesaw-enhanced"),function(){var n="tablesaw-bar",i={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},r={};c.events=i;var s=function(e){if(!e)throw new Error("Tablesaw requires an element.");this.table=e,this.$table=t(e),this.$thead=this.$table.children().filter("thead").eq(0),this.$tbody=this.$table.children().filter("tbody"),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.$toolbar=null,this.attributes={subrow:"data-tablesaw-subrow",ignorerow:"data-tablesaw-ignorerow"},this.init()};s.prototype.init=function(){if(!this.$thead.length)throw new Error("tablesaw: a <thead> is required, but none was found.");if(!this.$thead.find("th").length)throw new Error("tablesaw: no header cells found. Are you using <th> inside of <thead>?");this.$table.attr("id")||this.$table.attr("id","tablesaw-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.data("tablesaw",this),this.$table.trigger(i.create,[this])},s.prototype.getConfig=function(e){var a=t.extend(r,e||{});return t.extend(a,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},s.prototype._getPrimaryHeaderRow=function(){return this._getHeaderRows().eq(0)},s.prototype._getHeaderRows=function(){return this.$thead.children().filter("tr").filter((function(){return!t(this).is("[data-tablesaw-ignorerow]")}))},s.prototype._getRowIndex=function(t){return t.prevAll().length},s.prototype._getHeaderRowIndeces=function(){var e=this,a=[];return this._getHeaderRows().each((function(){a.push(e._getRowIndex(t(this)))})),a},s.prototype._getPrimaryHeaderCells=function(t){return(t||this._getPrimaryHeaderRow()).find("th")},s.prototype._$getCells=function(e){var a=this;return t(e).add(e.cells).filter((function(){var e=t(this),n=e.parent(),i=e.is("[colspan]");return!(n.is("["+a.attributes.subrow+"]")||n.is("["+a.attributes.ignorerow+"]")&&i)}))},s.prototype._getVisibleColspan=function(){var e=0;return this._getPrimaryHeaderCells().each((function(){var a=t(this);"none"!==a.css("display")&&(e+=parseInt(a.attr("colspan"),10)||1)})),e},s.prototype.getColspanForCell=function(e){var a=this._getVisibleColspan(),n=0;return e.closest("tr").data("tablesaw-rowspanned")&&n++,e.siblings().each((function(){var e=t(this),a=parseInt(e.attr("colspan"),10)||1;"none"!==e.css("display")&&(n+=a)})),a-n},s.prototype.isCellInColumn=function(e,a){return t(e).add(e.cells).filter((function(){return this===a})).length},s.prototype.updateColspanCells=function(e,a,n){var i=this,r=i._getPrimaryHeaderRow();this.$table.find("[rowspan][data-tablesaw-priority]").each((function(){var e=t(this);if("persist"===e.attr("data-tablesaw-priority")){var a=e.closest("tr"),n=parseInt(e.attr("rowspan"),10);n>1&&((a=a.next()).data("tablesaw-rowspanned",!0),n--)}})),this.$table.find("[colspan],[data-tablesaw-maxcolspan]").filter((function(){return t(this).closest("tr")[0]!==r[0]})).each((function(){var r=t(this);if(void 0===n||i.isCellInColumn(a,this)){var s=i.getColspanForCell(r);e&&void 0!==n&&r[0===s?"addClass":"removeClass"](e);var o=parseInt(r.attr("data-tablesaw-maxcolspan"),10);o?s>o&&(s=o):r.attr("data-tablesaw-maxcolspan",r.attr("colspan")),r.attr("colspan",s)}}))},s.prototype._findPrimaryHeadersForCell=function(t){for(var e=this._getPrimaryHeaderRow(),a=this._getPrimaryHeaderCells(e),n=this._getRowIndex(e),i=[],r=0;r<this.headerMapping.length;r++)if(r!==n)for(var s=0;s<this.headerMapping[r].length;s++)this.headerMapping[r][s]===t&&i.push(a[s]);return i},s.prototype.getRows=function(){var e=this;return this.$table.find("tr").filter((function(){return t(this).closest("table").is(e.$table)}))},s.prototype.getBodyRows=function(e){return(e?t(e):this.$tbody).children().filter("tr")},s.prototype.getHeaderCellIndex=function(t){for(var e=this.headerMapping[0],a=0;a<e.length;a++)if(e[a]===t)return a;return-1},s.prototype._initCells=function(){this.$table.find("[data-tablesaw-maxcolspan]").each((function(){var e=t(this);e.attr("colspan",e.attr("data-tablesaw-maxcolspan"))}));var e=this.getRows(),a=[];e.each((function(t){a[t]=[]})),e.each((function(e){var n=0;t(this).children().each((function(){for(var t=parseInt(this.getAttribute("data-tablesaw-maxcolspan")||this.getAttribute("colspan"),10),i=parseInt(this.getAttribute("rowspan"),10);a[e][n];)n++;if(a[e][n]=this,t)for(var r=0;r<t-1;r++)n++,a[e][n]=this;if(i)for(var s=1;s<i;s++)a[e+s][n]=this;n++}))}));for(var n=this._getHeaderRowIndeces(),i=0;i<a[0].length;i++)for(var r=0,s=n.length;r<s;r++){var o,l=a[n[r]][i],h=n[r];for(l.cells||(l.cells=[]);h<a.length;)l!==(o=a[h][i])&&l.cells.push(o),h++}this.headerMapping=a},s.prototype.refresh=function(){this._initCells(),this.$table.trigger(i.refresh,[this])},s.prototype._getToolbarAnchor=function(){var t=this.$table.parent();return t.is(".tablesaw-overflow")?t:this.$table},s.prototype._getToolbar=function(t){return t||(t=this._getToolbarAnchor()),t.prev().filter("."+n)},s.prototype.createToolbar=function(){var e=this._getToolbarAnchor(),a=this._getToolbar(e);a.length||(a=t("<div>").addClass(n).insertBefore(e)),this.$toolbar=a,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},s.prototype.destroy=function(){this._getToolbar().each((function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")}));var n=this.$table.attr("id");t(a).off("."+n),t(e).off("."+n),this.$table.trigger(i.destroy,[this]),this.$table.removeData("tablesaw")},t.fn.tablesaw=function(){return this.each((function(){t(this).data("tablesaw")||new s(this)}))};var o=t(a);o.on("enhance.tablesaw",(function(e){c.mustard&&t(e.target).find("table").filter("[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]").tablesaw()}));var l,h,d=!1;o.on("scroll.tablesaw",(function(){d=!0,e.clearTimeout(l),l=e.setTimeout((function(){d=!1}),300)})),t(e).on("resize",(function(){d||(e.clearTimeout(h),h=e.setTimeout((function(){o.trigger(i.resize)}),150))})),c.Table=s}(),i="tablesaw-stack",r="tablesaw-cell-label",s="tablesaw-cell-content",o="tablesaw-stack",l="data-tablesaw-no-labels",h="data-tablesaw-hide-empty",(d=function(e,a){this.tablesaw=a,this.$table=t(e),this.labelless=this.$table.is("["+l+"]"),this.hideempty=this.$table.is("["+h+"]"),this.$table.data(o,this)}).prototype.init=function(){if(this.$table.addClass(i),!this.labelless){var e=this;this.$table.find("th, td").filter((function(){return!t(this).closest("thead").length})).filter((function(){return!(t(this).closest("tr").is("["+l+"]")||e.hideempty&&!t(this).html())})).each((function(){var n=t(a.createElement("b")).addClass(r),i=t(this);t(e.tablesaw._findPrimaryHeadersForCell(this)).each((function(e){var i=t(this.cloneNode(!0)),r=i.find(".tablesaw-sortable-btn");i.find(".tablesaw-sortable-arrow").remove();var s=i.find("[data-tablesaw-checkall]");s.closest("label").remove(),s.length?n=t([]):(e>0&&n.append(a.createTextNode(", ")),n.append(r.length?r[0].childNodes:i[0].childNodes))})),n.length&&!i.find("."+s).length&&i.wrapInner("<span class='"+s+"'></span>");var o=i.find("."+r);o.length?o.replaceWith(n):i.prepend(n)}))}},d.prototype.destroy=function(){this.$table.removeClass(i),this.$table.find("."+r).remove(),this.$table.find("."+s).each((function(){t(this).replaceWith(this.childNodes)}))},t(a).on(c.events.create,(function(t,e){"stack"===e.mode&&new d(e.table,e).init()})).on(c.events.refresh,(function(e,a){"stack"===a.mode&&t(a.table).data(o).init()})).on(c.events.destroy,(function(e,a){"stack"===a.mode&&t(a.table).data(o).destroy()})),c.Stack=d,c}));