function updateAllStatus(){var device_holder=$("#device_details");if(device_holder.hasClass("updating"))console.log("[Devices][updateAllStatus]SKIP");else{device_holder.addClass("updating"),console.log("[Devices][updateAllStatus]START");var timeout=15*device_holder.find("card").length;Sonoff.getAllStatus(timeout,(function(result){device_holder.find(".card").each((function(key,card){var device_id=$(card).data("device_id"),device_relais=$(card).data("device_relais"),device_group=$(card).data("device_group"),data=result[device_id]||void 0;if(void 0===data||$.isEmptyObject(data)||data.ERROR||data.WARNING||""===data||void 0===data||void 0!==data.statusText){console.log("[LIST][updateAllStatus]["+device_id+"][ERROR] DATA => "+JSON.stringify(data)),$(card).hasClass("toggled")?$(card).removeClass("toggled"):$(card).find(".status").find("input").parent().addClass("error");var msg=$.i18n("ERROR");void 0!==data?void 0!==data.ERROR?msg=data.ERROR:void 0!==data.WARNING?msg=data.WARNING:void 0!==data.statusText&&(msg=data.statusText):msg="data is empty",$(card).attr("data-original-title",msg).attr("data-toggle","tooltip").tooltip({html:!0,delay:700})}else{console.log("[LIST][updateAllStatus]["+device_id+"]MSG => "+JSON.stringify(data));var device_status=data.StatusSTS.POWER||eval("data.StatusSTS.POWER"+device_relais);updateCard($(card),data,device_status)}})),device_holder.removeClass("updating")}))}}function updateCard(t,a,e){if(parseVersion(a.StatusFWR.Version)>=510009)var s=a.StatusSTS.Wifi.RSSI,i=(a.StatusSTS.Wifi.SSId,a.StatusSTS.Uptime);else s=a.StatusSTS.WLAN?a.StatusSTS.WLAN.RSSI:a.StatusSTS.Wifi.RSSI,a.StatusSTS.WLAN?a.StatusSTS.WLAN.SSID:a.StatusSTS.Wifi.SSId,i=a.StatusSTS.Laufzeit?a.StatusSTS.Laufzeit:a.StatusSTS.Uptime;var d={},o=getEnergyPower(a);""!==o&&(d.energyPower=o);var n=getTemp(a);""!==n&&(d.temp=n);var S=getHumidity(a);""!==S&&(d.humidity=S);var l=getPressure(a);""!==l&&(d.pressure=l);var r=getDistance(a);""!==r&&(d.distance=r);var u=getGas(a);""!==u&&(d.gas=u);var v=a.idx?a.idx:"";""!==v&&(d.idx=v),d.version=a.StatusFWR.Version;var c=$(t).find(".devices-switch-container img"),p=_RESOURCESURL_+"img/device_icons/"+c.data("icon")+"_%pw.png?v=160";p=p.replace("%pw",e.toLowerCase()),c.attr("src",p);var f="bad";s>=25&&(f="weak"),s>=50&&(f="medium"),s>=75&&(f="strong"),$(t).find(".device-rssi svg").addClass("ta-wifi-"+f).removeClass("searching error"),$(t).find(".device-rssi").data("original-title",s+"%").attr("title",s+"%").tooltip("_fixTitle");var g=void 0!==a.StatusPRM.StartupDateTimeUtc?a.StatusPRM.StartupDateTimeUtc:void 0!==a.StatusPRM.StartupUTC?a.StatusPRM.StartupUTC:"";if(""!==g){var m=g+"Z".replace(/-/g,"/");m=new Date(m);var h=(new Date-m)/1e3,T=Math.floor(h/86400),R=Math.floor((h-86400*T)/3600),_=Math.floor((h-86400*T-3600*R)/60),C=Math.floor(h-86400*T-3600*R-60*_);i=(0!==T?T+$.i18n("UPTIME_SHORT_DAY"):"")+" "+(0!==R||0!==T?R+$.i18n("UPTIME_SHORT_HOUR"):"")+" "+(0!==_||0!==R||0!==T?_+$.i18n("UPTIME_SHORT_MIN"):"")+" "+(0!==C||0!==_||0!==R?C+$.i18n("UPTIME_SHORT_SEC"):"-"),i=$.trim(i);var L=m.toLocaleString($("html").attr("lang")+"-"+$("html").attr("lang").toUpperCase(),{hour12:!1});$(t).find(".runtime").html(i).data("original-title",L).attr("title",L).tooltip("_fixTitle"),$(t).find(".runtime").fadeIn()}else $(t).find(".runtime").html(i+"h");$(t).find(".hostname span").hasClass("dont-update")||$(t).find(".hostname span").html(void 0!==a.StatusNET.Hostname?a.StatusNET.Hostname:"?"),$(t).find(".mac span").hasClass("dont-update")||$(t).find(".mac span").html(void 0!==a.StatusNET.Mac?a.StatusNET.Mac:"?"),$(t).find(".mqtt span").hasClass("dont-update")||$(t).find(".mqtt span").html(void 0!==a.StatusMQT?"1":"0"),$(t).find(".poweronstate span").hasClass("dont-update")||$(t).find(".poweronstate span").html(void 0!==a.Status.PowerOnState?a.Status.PowerOnState:"?"),$(t).find(".ledstate span").hasClass("dont-update")||$(t).find(".ledstate span").html(void 0!==a.Status.LedState?a.Status.LedState:"?"),$(t).find(".savedata span").hasClass("dont-update")||$(t).find(".savedata span").html(void 0!==a.Status.SaveData?a.Status.SaveData:"?"),$(t).find(".sleep span").hasClass("dont-update")||$(t).find(".sleep span").html(void 0!==a.StatusPRM.Sleep?a.StatusPRM.Sleep+"ms":"?"),$(t).find(".bootcount span").html(void 0!==a.StatusPRM.BootCount?a.StatusPRM.BootCount:"?"),$(t).find(".savecount span").html(void 0!==a.StatusPRM.SaveCount?a.StatusPRM.SaveCount:"?"),$(t).find(".log span").html((void 0!==a.StatusLOG.SerialLog?a.StatusLOG.SerialLog:"?")+"|"+(void 0!==a.StatusLOG.WebLog?a.StatusLOG.WebLog:"?")+"|"+(void 0!==a.StatusLOG.SysLog?a.StatusLOG.SysLog:"?")),$(t).find(".wificonfig span").hasClass("dont-update")||$(t).find(".wificonfig span").html(void 0!==a.StatusNET.WifiConfig?a.StatusNET.WifiConfig:"?"),$(t).find(".vcc span").html(void 0!==a.StatusSTS.Vcc?a.StatusSTS.Vcc+"V":"?"),$(".doubleScroll-scroll").css({width:$("#device-list").width()}).parent().trigger("resize"),$.each(d,(function(a,e){console.log(a+" => "+e),t.find(".device-data."+a).length>0&&t.find(".device-data."+a).html(e).fadeIn()})),$(t).removeClass("updating")}$(document).on("ready",(function(){$(".svg-inject").svgInject((function(){})),updateAllStatus()}));